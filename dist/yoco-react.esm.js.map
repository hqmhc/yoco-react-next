{"version":3,"file":"yoco-react.esm.js","sources":["../src/InlineForm.tsx","../src/hooks/useYoco.ts","../src/hooks/usePopup.ts","../src/hooks/useEFT.ts"],"sourcesContent":["import React, { FC, HTMLAttributes, ReactChild } from 'react';\n\nexport interface Props extends HTMLAttributes<HTMLFormElement> {\n  children?: ReactChild;\n  onSubmit: () => void;\n}\n\nexport const InlineForm: FC<Props> = ({ children, onSubmit, ...rest }) => {\n  return (\n    <form\n      id=\"payment-form\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        onSubmit();\n      }}\n      {...rest}\n    >\n      <div className=\"one-liner\">\n        <div id=\"card-frame\" className=\"card-frame\"></div>\n      </div>\n      {children}\n    </form>\n  );\n};\n","import { useEffect, useState } from 'react';\n\nimport { YocoSDK } from '../types';\n\nconst addScript = (onLoad: () => void) => {\n  const script = document.createElement('script');\n  script.src = 'https://js.yoco.com/sdk/v2/blackbird-web-sdk.js';\n  script.async = true;\n  script.onload = onLoad;\n  document.head.appendChild(script);\n};\n\nexport const useYoco = (publicKey: string, id?: string) => {\n  const [yocoSDK, setYocoSDK] = useState<YocoSDK>();\n  const initSdk = () => {\n    setYocoSDK(\n      new (window as any).BlackbirdSDK({\n        publicKey,\n        id,\n      })\n    );\n  };\n\n  useEffect(() => {\n    if (!(window as any).BlackbirdSDK) {\n      addScript(() => initSdk());\n    } else {\n      initSdk();\n    }\n  }, []);\n  return yocoSDK;\n};\n","import { useEffect, useState } from 'react';\nimport { useYoco } from './useYoco';\n\nimport { YocoPopupConfig } from '../types';\n\nexport const usePopup = (publicKey: string, paymentId: string) => {\n  const yocoSDK = useYoco(publicKey, paymentId);\n  const [isYocoReady, setisYocoReady] = useState<boolean>(false);\n\n  function showPopup(params: YocoPopupConfig) {\n    yocoSDK?.showPopup(params);\n  }\n\n  useEffect(() => {\n    if (!yocoSDK) {\n      setisYocoReady(false);\n    }\n    setisYocoReady(true);\n  }, [yocoSDK]);\n\n  return [showPopup, isYocoReady] as const;\n};\n","import { useEffect, useState } from 'react';\nimport { useYoco } from './useYoco';\n\nimport { YocoCheckoutResult, YocoEFTPopupConfig } from '../types';\n\nexport const useEFT = (publicKey: string) => {\n  const yocoSDK = useYoco(publicKey);\n  const [isYocoReady, setisYocoReady] = useState<boolean>(false);\n\n  function showEFT(params: YocoEFTPopupConfig): Promise<YocoCheckoutResult> {\n    if (!yocoSDK) {\n      throw new Error('YocoSDK not ready.');\n    }\n    return yocoSDK.submit({\n      ...params,\n      paymentType: 'EFT',\n    });\n  }\n\n  useEffect(() => {\n    if (!yocoSDK) {\n      setisYocoReady(false);\n    }\n    setisYocoReady(true);\n  }, [yocoSDK]);\n\n  return [showEFT, isYocoReady] as const;\n};\n"],"names":["InlineForm","children","onSubmit","rest","React","id","event","preventDefault","className","addScript","onLoad","script","document","createElement","src","async","onload","head","appendChild","useYoco","publicKey","useState","yocoSDK","setYocoSDK","initSdk","window","BlackbirdSDK","useEffect","usePopup","paymentId","isYocoReady","setisYocoReady","showPopup","params","useEFT","showEFT","Error","submit","paymentType"],"mappings":"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"}